@using MongoDB.Driver
@using MongoDB.Bson
@using MongoDB.Bson.Serialization.Attributes

@foreach(var item in ticketsList)
            {
                <SingleTicketComponent ticket="item"></SingleTicketComponent>
            }

@code {
    public Ticket ticket1 = new Ticket("Moscow", "SPB", DateTime.Parse("Jan 1, 2022"), "1");
    List<Ticket> ticketsList = new List<Ticket>();

    protected override void OnInitialized()
    {
        var client = new MongoClient("mongodb://localhost");
        var database = client.GetDatabase("TicketOffice");
        var collection = database.GetCollection<Ticket>("Tickets").AsQueryable();


        foreach (var item in collection)
        {
            Ticket ticket = new Ticket(item.PointOfDeparture, item.PointOfDestination, item.Date, item.ClassType);
            ticketsList.Add(ticket);
        }
    }

}
